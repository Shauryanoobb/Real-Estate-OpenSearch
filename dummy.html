<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        
        .nav-links {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 10px 20px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover, .nav-btn.active {
            background: #667eea;
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }
        
        .page {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeIn 0.3s ease;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .page-title {
            font-size: 32px;
            margin-bottom: 30px;
            color: #333;
            border-bottom: 3px solid #667eea;
            padding-bottom: 15px;
        }
        
        .form-section {
            margin-bottom: 32px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e7ff;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 14px;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.3s ease;
            background: #f9fafb;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        button, .btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        button:hover, .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        button:active, .btn:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background: #6b7280;
        }
        
        .btn-danger {
            background: #ef4444;
        }
        
        .response-box {
            margin-top: 20px;
            padding: 20px;
            background: #ecfdf5;
            border: 2px solid #10b981;
            border-radius: 10px;
            display: none;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .response-box.error {
            background: #fee;
            border-color: #ef4444;
        }
        
        .required::after {
            content: "*";
            color: #ef4444;
            margin-left: 4px;
        }
        
        .property-card {
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        .property-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }
        
        .property-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }
        
        .property-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        .property-id {
            font-size: 12px;
            color: #6b7280;
        }
        
        .property-price {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        
        .property-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .property-detail {
            font-size: 14px;
            color: #4b5563;
        }
        
        .property-detail strong {
            color: #333;
        }
        
        .property-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }
        
        .property-actions button {
            padding: 8px 16px;
            font-size: 14px;
        }
        
        .search-filters {
            background: #f9fafb;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #6b7280;
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: #6b7280;
            font-size: 18px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        @media (max-width: 768px) {
            .navbar {
                padding: 15px 20px;
            }
            
            .nav-links {
                width: 100%;
                justify-content: center;
            }
            
            .page {
                padding: 24px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

<div class="navbar">
    <div class="logo">üè† Property Manager</div>
    <div class="nav-links">
        <button class="nav-btn active" onclick="showPage('search')">Search</button>
        <button class="nav-btn" onclick="showPage('add')">Add Property</button>
        <button class="nav-btn" onclick="showPage('view')">View Property</button>
        <button class="nav-btn" onclick="showPage('all')">All Properties</button>
        <button class="nav-btn" onclick="showPage('update')">Update</button>
        <button class="nav-btn" onclick="showPage('delete')">Delete</button>
    </div>
</div>

<div class="container">
    <!-- SEARCH PAGE -->
    <div id="search" class="page active">
        <h1 class="page-title">üîç Search Properties</h1>
        
        <div class="search-filters">
            <div class="form-row">
                <div class="form-group">
                    <label>Locality</label>
                    <input type="text" id="search_locality" placeholder="e.g., Koramangala" />
                </div>
                
                <div class="form-group">
                    <label>Keywords (Description)</label>
                    <input type="text" id="search_keywords" placeholder="Search in description" />
                </div>
                
                <div class="form-group">
                    <label>Title Keywords</label>
                    <input type="text" id="search_title" placeholder="Search in title" />
                </div>
                
                <div class="form-group">
                    <label>BHK</label>
                    <input type="number" id="search_bhk" placeholder="e.g., 3" />
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label>Min Area (sqft)</label>
                    <input type="number" id="search_min_sqft" placeholder="e.g., 1000" />
                </div>
                
                <div class="form-group">
                    <label>Max Area (sqft)</label>
                    <input type="number" id="search_max_sqft" placeholder="e.g., 2000" />
                </div>
                
                <div class="form-group">
                    <label>Min Price (‚Çπ)</label>
                    <input type="number" id="search_min_price" placeholder="e.g., 10000" />
                </div>
                
                <div class="form-group">
                    <label>Max Price (‚Çπ)</label>
                    <input type="number" id="search_max_price" placeholder="e.g., 50000" />
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label>Is Furnished?</label>
                    <select id="search_furnished">
                        <option value="">Any</option>
                        <option value="true">Yes</option>
                        <option value="false">No</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Has Lift?</label>
                    <select id="search_lift">
                        <option value="">Any</option>
                        <option value="true">Yes</option>
                        <option value="false">No</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Results Limit</label>
                    <input type="number" id="search_size" value="10" placeholder="10" />
                </div>
            </div>
            
            <div class="action-buttons">
                <button onclick="searchProperties()">üîç Search Properties</button>
                <button class="btn-secondary" onclick="clearSearchFilters()">Clear Filters</button>
            </div>
        </div>
        
        <div id="searchResults"></div>
    </div>

    <!-- ADD PROPERTY PAGE -->
    <div id="add" class="page">
        <h1 class="page-title">‚ûï Add New Property</h1>
        
        <form id="addPropertyForm">
            <div class="form-section">
                <div class="section-title">Basic Information</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Property ID</label>
                        <input type="text" id="add_property_id" required placeholder="e.g., PROP001" />
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Property Type</label>
                        <input type="text" id="add_property_type" required placeholder="e.g., Apartment" />
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Title</label>
                    <input type="text" id="add_title" required placeholder="e.g., Spacious 3BHK" />
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <textarea id="add_description" placeholder="Describe the property..."></textarea>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">Location Details</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Locality</label>
                        <input type="text" id="add_locality" required placeholder="e.g., Koramangala" />
                    </div>
                    
                    <div class="form-group">
                        <label>City</label>
                        <input type="text" id="add_city" placeholder="e.g., Bangalore" />
                    </div>
                    
                    <div class="form-group">
                        <label>State</label>
                        <input type="text" id="add_state" placeholder="e.g., Karnataka" />
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Price (‚Çπ)</label>
                        <input type="number" id="add_price" required placeholder="e.g., 25000" />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Latitude</label>
                        <input type="text" id="add_lat" placeholder="e.g., 12.9716" />
                    </div>
                    
                    <div class="form-group">
                        <label>Longitude</label>
                        <input type="text" id="add_lon" placeholder="e.g., 77.5946" />
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">Property Specifications</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="required">BHK</label>
                        <input type="number" id="add_bhk" required placeholder="e.g., 3" />
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Bathrooms</label>
                        <input type="number" id="add_bathrooms" required placeholder="e.g., 2" />
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Area (sqft)</label>
                        <input type="number" id="add_area_sqft" required placeholder="e.g., 1500" />
                    </div>
                    
                    <div class="form-group">
                        <label>Floor Number</label>
                        <input type="number" id="add_floor_number" placeholder="e.g., 5" />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>No. of Toilets</label>
                        <input type="number" id="add_no_of_toilets" placeholder="e.g., 2" />
                    </div>
                    
                    <div class="form-group">
                        <label>Balconies</label>
                        <input type="number" id="add_balconies" placeholder="e.g., 2" />
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">Furnishing & Amenities</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Furnishing Status</label>
                        <input type="text" id="add_furnishing_status" placeholder="e.g., Semi-furnished" />
                    </div>
                    
                    <div class="form-group">
                        <label>Is Furnished?</label>
                        <select id="add_furnished_or_unfurnished">
                            <option value="">Choose...</option>
                            <option value="true">Yes</option>
                            <option value="false">No</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Amenities (comma-separated)</label>
                    <input type="text" id="add_amenities" placeholder="e.g., Gym, Pool, Parking" />
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">Building Details</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Age of Building (years)</label>
                        <input type="number" id="add_age_of_building" placeholder="e.g., 5" />
                    </div>
                    
                    <div class="form-group">
                        <label>Lift Available?</label>
                        <select id="add_lift_available">
                            <option value="">Choose...</option>
                            <option value="true">Yes</option>
                            <option value="false">No</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Listed Date</label>
                        <input type="date" id="add_listed_date" />
                    </div>
                    
                    <div class="form-group">
                        <label>Available From</label>
                        <input type="date" id="add_available_from" />
                    </div>
                </div>
            </div>

            <button type="button" onclick="addProperty()">‚ú® Add Property</button>
        </form>

        <div id="addResponse" class="response-box"></div>
    </div>

    <!-- VIEW SINGLE PROPERTY PAGE -->
    <div id="view" class="page">
        <h1 class="page-title">üëÅÔ∏è View Property</h1>
        
        <div class="form-group">
            <label class="required">Property ID</label>
            <input type="text" id="view_property_id" placeholder="Enter property ID" />
        </div>
        
        <button onclick="viewProperty()">View Property</button>
        
        <div id="viewResponse" class="response-box"></div>
    </div>

    <!-- ALL PROPERTIES PAGE -->
    <div id="all" class="page">
        <h1 class="page-title">üìã All Properties</h1>
        
        <div class="form-group" style="max-width: 200px;">
            <label>Number of Results</label>
            <input type="number" id="all_size" value="10" placeholder="10" />
        </div>
        
        <button onclick="getAllProperties()">Load Properties</button>
        
        <div id="allResults"></div>
    </div>

    <!-- UPDATE PROPERTY PAGE -->
    <div id="update" class="page">
        <h1 class="page-title">‚úèÔ∏è Update Property</h1>
        
        <div class="form-group">
            <label class="required">Property ID</label>
            <input type="text" id="update_property_id" placeholder="Enter property ID to update" />
        </div>
        
        <button class="btn-secondary" onclick="loadPropertyForUpdate()">Load Property Data</button>
        
        <form id="updatePropertyForm" style="margin-top: 30px;">
            <div class="form-section">
                <div class="section-title">Basic Information</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Property Type</label>
                        <input type="text" id="update_property_type" required />
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Title</label>
                        <input type="text" id="update_title" required />
                    </div>
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <textarea id="update_description"></textarea>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">Location Details</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Locality</label>
                        <input type="text" id="update_locality" required />
                    </div>
                    
                    <div class="form-group">
                        <label>City</label>
                        <input type="text" id="update_city" />
                    </div>
                    
                    <div class="form-group">
                        <label>State</label>
                        <input type="text" id="update_state" />
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Price (‚Çπ)</label>
                        <input type="number" id="update_price" required />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Latitude</label>
                        <input type="text" id="update_lat" />
                    </div>
                    
                    <div class="form-group">
                        <label>Longitude</label>
                        <input type="text" id="update_lon" />
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">Property Specifications</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="required">BHK</label>
                        <input type="number" id="update_bhk" required />
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Bathrooms</label>
                        <input type="number" id="update_bathrooms" required />
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Area (sqft)</label>
                        <input type="number" id="update_area_sqft" required />
                    </div>
                    
                    <div class="form-group">
                        <label>Floor Number</label>
                        <input type="number" id="update_floor_number" />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>No. of Toilets</label>
                        <input type="number" id="update_no_of_toilets" />
                    </div>
                    
                    <div class="form-group">
                        <label>Balconies</label>
                        <input type="number" id="update_balconies" />
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">Furnishing & Amenities</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Furnishing Status</label>
                        <input type="text" id="update_furnishing_status" />
                    </div>
                    
                    <div class="form-group">
                        <label>Is Furnished?</label>
                        <select id="update_furnished_or_unfurnished">
                            <option value="">Choose...</option>
                            <option value="true">Yes</option>
                            <option value="false">No</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Amenities (comma-separated)</label>
                    <input type="text" id="update_amenities" />
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">Building Details</div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Age of Building (years)</label>
                        <input type="number" id="update_age_of_building" />
                    </div>
                    
                    <div class="form-group">
                        <label>Lift Available?</label>
                        <select id="update_lift_available">
                            <option value="">Choose...</option>
                            <option value="true">Yes</option>
                            <option value="false">No</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Listed Date</label>
                        <input type="date" id="update_listed_date" />
                    </div>
                    
                    <div class="form-group">
                        <label>Available From</label>
                        <input type="date" id="update_available_from" />
                    </div>
                </div>
            </div>

            <button type="button" onclick="updateProperty()">üíæ Update Property</button>
        </form>

        <div id="updateResponse" class="response-box"></div>
    </div>

    <!-- DELETE PROPERTY PAGE -->
    <div id="delete" class="page">
        <h1 class="page-title">üóëÔ∏è Delete Property</h1>
        
        <div class="form-group">
            <label class="required">Property ID</label>
            <input type="text" id="delete_property_id" placeholder="Enter property ID to delete" />
        </div>
        
        <button class="btn-danger" onclick="deleteProperty()">Delete Property</button>
        
        <div id="deleteResponse" class="response-box"></div>
    </div>
</div>

<script>
const API_BASE = "http://localhost:8000/properties";

// Navigation
function showPage(pageId) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    
    document.getElementById(pageId).classList.add('active');
    event.target.classList.add('active');
}

// Helper function to build property data object
function buildPropertyData(prefix) {
    return {
        property_id: document.getElementById(`${prefix}_property_id`)?.value,
        title: document.getElementById(`${prefix}_title`).value,
        description: document.getElementById(`${prefix}_description`).value || null,
        locality: document.getElementById(`${prefix}_locality`).value,
        city: document.getElementById(`${prefix}_city`).value || null,
        state: document.getElementById(`${prefix}_state`).value || null,
        price: parseFloat(document.getElementById(`${prefix}_price`).value),
        bhk: parseInt(document.getElementById(`${prefix}_bhk`).value),
        bathrooms: parseInt(document.getElementById(`${prefix}_bathrooms`).value),
        area_sqft: parseInt(document.getElementById(`${prefix}_area_sqft`).value),
        furnishing_status: document.getElementById(`${prefix}_furnishing_status`).value || null,
        furnished_or_unfurnished: document.getElementById(`${prefix}_furnished_or_unfurnished`).value === "" ? null :
                                  document.getElementById(`${prefix}_furnished_or_unfurnished`).value === "true",
        property_type: document.getElementById(`${prefix}_property_type`).value,
        amenities: document.getElementById(`${prefix}_amenities`).value
                        ? document.getElementById(`${prefix}_amenities`).value.split(",").map(a => a.trim())
                        : [],
        listed_date: document.getElementById(`${prefix}_listed_date`).value || null,
        available_from: document.getElementById(`${prefix}_available_from`).value || null,
        age_of_building: document.getElementById(`${prefix}_age_of_building`).value || null,
        lift_available: document.getElementById(`${prefix}_lift_available`).value === "" ? null :
                        document.getElementById(`${prefix}_lift_available`).value === "true",
        floor_number: document.getElementById(`${prefix}_floor_number`).value || null,
        no_of_toilets: document.getElementById(`${prefix}_no_of_toilets`).value || null,
        balconies: document.getElementById(`${prefix}_balconies`).value || null,
        lat: document.getElementById(`${prefix}_lat`).value || null,
        lon: document.getElementById(`${prefix}_lon`).value || null,
    };
}